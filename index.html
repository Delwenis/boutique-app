<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Gestion Boutique Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Sora', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
        }
        .container { padding: 20px; max-width: 1200px; margin: 0 auto; }
        .hidden { display: none !important; }
        h1 { font-family: 'Bebas Neue'; font-size: clamp(36px, 8vw, 72px); text-align: center; margin-bottom: 40px; letter-spacing: 4px; text-shadow: 4px 4px 0 rgba(0,0,0,0.3); }
        h2 { font-family: 'Bebas Neue'; font-size: clamp(32px, 6vw, 48px); margin-bottom: 30px; text-align: center; letter-spacing: 2px; }
        h3 { font-family: 'Bebas Neue'; font-size: clamp(20px, 4vw, 28px); margin-bottom: 20px; letter-spacing: 1px; }
        .btn {
            border: none; border-radius: 12px; padding: 15px 30px; cursor: pointer;
            font-size: 16px; transition: all 0.3s; display: flex;
            align-items: center; justify-content: center; gap: 10px; width: 100%;
            font-family: 'Bebas Neue'; letter-spacing: 2px; font-weight: 700;
        }
        .btn-primary { background: linear-gradient(135deg, #ff6b6b, #ff8787); color: #1a1a2e; }
        .btn-secondary { background: linear-gradient(135deg, #4ecdc4, #44a6a0); color: #1a1a2e; }
        .btn-tertiary { background: linear-gradient(135deg, #ffe66d, #ffd93d); color: #1a1a2e; }
        .btn-back { background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); color: #fff; margin-bottom: 20px; width: auto; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .menu-card {
            background: linear-gradient(135deg, rgba(255,107,107,0.8), rgba(255,107,107,0.6));
            border: none; border-radius: 20px; padding: 40px 30px; cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); text-align: center; transition: all 0.3s;
        }
        .menu-card:hover { transform: translateY(-5px); }
        .menu-card span { font-family: 'Bebas Neue'; font-size: 24px; color: #1a1a2e; display: block; margin-top: 15px; letter-spacing: 2px; }
        .form-box { background: rgba(255,255,255,0.05); padding: 30px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 10px; font-weight: 600; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; }
        .form-control {
            width: 100%; padding: 15px; border-radius: 12px;
            border: 2px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);
            color: #fff; font-size: 16px; outline: none; font-family: 'Sora';
        }
        .form-control:focus { border-color: #4ecdc4; }
        select.form-control { cursor: pointer; }
        select.form-control option { background: #1a1a2e; color: #fff; }
        .search-box { position: relative; margin-bottom: 20px; }
        .search-input {
            width: 100%; padding: 15px 15px 15px 50px; border-radius: 12px;
            border: 2px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1);
            color: #fff; font-size: 16px; outline: none; font-family: 'Sora';
        }
        .search-input:focus { border-color: #4ecdc4; }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: rgba(255,255,255,0.5); }
        .table-container { background: rgba(255,255,255,0.05); border-radius: 20px; overflow-x: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.3); }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        thead tr { background: rgba(255,255,255,0.1); }
        th { padding: 15px; font-family: 'Bebas Neue'; font-size: 16px; letter-spacing: 1px; }
        td { padding: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
        tbody tr:nth-child(even) { background: rgba(255,255,255,0.02); }
        .highlight-box {
            background: linear-gradient(135deg, rgba(255,230,109,0.2), rgba(255,230,109,0.1));
            padding: 30px; border-radius: 20px; margin-bottom: 30px; text-align: center;
            box-shadow: 0 10px 30px rgba(255,230,109,0.3);
        }
        .highlight-value { font-family: 'Bebas Neue'; font-size: 48px; color: #ffe66d; letter-spacing: 2px; }
        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .stat-card { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3); margin-bottom: 15px; }
        .stat-label { font-size: 14px; color: rgba(255,255,255,0.7); margin-bottom: 10px; font-weight: 600; text-transform: uppercase; }
        .stat-value { font-family: 'Bebas Neue'; font-size: 32px; color: #4ecdc4; letter-spacing: 1px; }
        .cart-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 10px; }
        .btn-delete { background: #ff6b6b; border: none; border-radius: 8px; padding: 8px 12px; cursor: pointer; color: #fff; font-weight: 700; }
        .receipt { background: #fff; color: #1a1a2e; padding: 40px; border-radius: 20px; margin-bottom: 20px; }
        .receipt-header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #1a1a2e; padding-bottom: 20px; }
        .receipt-title { font-family: 'Bebas Neue'; font-size: 48px; margin: 0; letter-spacing: 3px; }
        .receipt-info { margin-bottom: 30px; padding: 20px; background: #f5f5f5; border-radius: 10px; }
        .receipt-total { background: #1a1a2e; color: #fff; padding: 20px; border-radius: 10px; }
        .empty-state { padding: 60px; text-align: center; color: rgba(255,255,255,0.5); }
        .alert-box { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.95); padding: 30px 40px; border-radius: 20px; z-index: 10000; min-width: 300px; max-width: 90%; border: 2px solid rgba(78,205,196,0.3); text-align: center; }
        .alert-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; backdrop-filter: blur(5px); }
        @media (max-width: 768px) { 
            .two-col { grid-template-columns: 1fr; }
            .container { padding: 15px; }
            table { font-size: 14px; }
            th, td { padding: 10px; }
        }
        @media print {
            body * { visibility: hidden; }
            .receipt, .receipt * { visibility: visible; }
            .receipt { position: absolute; left: 0; top: 0; width: 100%; }
            .btn { display: none !important; }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Menu Principal -->
        <div id="main-menu" class="container">
            <h1>üì± GESTION BOUTIQUE PRO</h1>
            <div class="menu-grid">
                <button class="menu-card" onclick="showPage('stock-menu')">
                    <div style="font-size: 60px;">üè™</div>
                    <span>GESTION DE STOCK</span>
                </button>
                <button class="menu-card" onclick="showPage('sales')" style="background: linear-gradient(135deg, rgba(78,205,196,0.8), rgba(78,205,196,0.6));">
                    <div style="font-size: 60px;">üí∞</div>
                    <span>VENTES</span>
                </button>
                <button class="menu-card" onclick="showPage('clients')" style="background: linear-gradient(135deg, rgba(255,230,109,0.8), rgba(255,230,109,0.6));">
                    <div style="font-size: 60px;">üë•</div>
                    <span>CLIENTS</span>
                </button>
                <button class="menu-card" onclick="showPage('accounting')" style="background: linear-gradient(135deg, rgba(168,218,220,0.8), rgba(168,218,220,0.6));">
                    <div style="font-size: 60px;">üìä</div>
                    <span>COMPTABILIT√â</span>
                </button>
                <button class="menu-card" onclick="showPage('stats')" style="background: linear-gradient(135deg, rgba(255,182,193,0.8), rgba(255,182,193,0.6));">
                    <div style="font-size: 60px;">üìà</div>
                    <span>STATISTIQUES</span>
                </button>
            </div>
        </div>

        <!-- Menu Stock -->
        <div id="stock-menu" class="container hidden">
            <button class="btn btn-back" onclick="showPage('main-menu')">‚Üê Retour</button>
            <h2>GESTION DE STOCK</h2>
            <div class="menu-grid">
                <button class="menu-card" onclick="showPage('add-product')">
                    <div style="font-size: 50px;">‚ûï</div>
                    <span>AJOUTER</span>
                </button>
                <button class="menu-card" onclick="showPage('update-stock')" style="background: linear-gradient(135deg, rgba(78,205,196,0.8), rgba(78,205,196,0.6));">
                    <div style="font-size: 50px;">üìù</div>
                    <span>MISE √Ä JOUR</span>
                </button>
                <button class="menu-card" onclick="showPage('view-stock')" style="background: linear-gradient(135deg, rgba(255,230,109,0.8), rgba(255,230,109,0.6));">
                    <div style="font-size: 50px;">üìã</div>
                    <span>VOIR STOCK</span>
                </button>
            </div>
        </div>

        <!-- Ajouter Produit -->
        <div id="add-product" class="container hidden">
            <button class="btn btn-back" onclick="showPage('stock-menu')">‚Üê Retour</button>
            <h2>‚ûï AJOUTER UN ARTICLE</h2>
            <form class="form-box" onsubmit="addProduct(event)">
                <div class="form-group">
                    <label>Nom du produit *</label>
                    <input type="text" class="form-control" id="product-name" required>
                </div>
                <div class="two-col">
                    <div class="form-group">
                        <label>Prix achat (FCFA) *</label>
                        <input type="number" class="form-control" id="product-buy-price" required min="0">
                    </div>
                    <div class="form-group">
                        <label>Prix vente (FCFA) *</label>
                        <input type="number" class="form-control" id="product-sell-price" required min="0">
                    </div>
                </div>
                <div class="form-group">
                    <label>Quantit√© *</label>
                    <input type="number" class="form-control" id="product-quantity" required min="1">
                </div>
                <button type="submit" class="btn btn-primary">AJOUTER</button>
            </form>
        </div>

        <!-- Mise √† jour Stock avec Recherche -->
        <div id="update-stock" class="container hidden">
            <button class="btn btn-back" onclick="showPage('stock-menu')">‚Üê Retour</button>
            <h2>üìù MISE √Ä JOUR STOCK</h2>
            <form class="form-box" onsubmit="updateStock(event)">
                <div class="search-box">
                    <svg class="search-icon" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input type="text" class="search-input" id="search-update" placeholder="üîç Rechercher un produit..." oninput="filterProducts('update')">
                </div>
                <div class="form-group">
                    <label>S√©lectionner un produit</label>
                    <select class="form-control" id="update-select" onchange="loadForUpdate()">
                        <option value="">-- Choisir un produit --</option>
                    </select>
                </div>
                <div id="update-fields" class="hidden">
                    <div class="two-col">
                        <div class="form-group">
                            <label>Prix achat (FCFA)</label>
                            <input type="number" class="form-control" id="update-buy-price" min="0">
                        </div>
                        <div class="form-group">
                            <label>Prix vente (FCFA)</label>
                            <input type="number" class="form-control" id="update-sell-price" min="0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Quantit√© √† ajouter</label>
                        <input type="number" class="form-control" id="update-qty" min="0" value="0">
                    </div>
                    <button type="submit" class="btn btn-secondary">METTRE √Ä JOUR</button>
                </div>
            </form>
        </div>

        <!-- Voir Stock -->
        <div id="view-stock" class="container hidden">
            <button class="btn btn-back" onclick="showPage('stock-menu')">‚Üê Retour</button>
            <h2>üìã STOCK DISPONIBLE</h2>
            <div class="highlight-box">
                <div style="font-size: 16px; color: rgba(26,26,46,0.7); font-weight: 600; margin-bottom: 10px; letter-spacing: 1px;">VALEUR TOTALE DU STOCK</div>
                <div class="highlight-value" id="total-value">0 FCFA</div>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>PRODUIT</th>
                            <th style="text-align: center;">PRIX ACHAT</th>
                            <th style="text-align: center;">PRIX VENTE</th>
                            <th style="text-align: center;">QUANTIT√â</th>
                            <th style="text-align: right;">VALEUR</th>
                        </tr>
                    </thead>
                    <tbody id="stock-tbody"></tbody>
                </table>
            </div>
        </div>

        <!-- Ventes avec Recherche -->
        <div id="sales" class="container hidden">
            <button class="btn btn-back" onclick="showPage('main-menu')">‚Üê Retour</button>
            <h2>üí∞ NOUVELLE VENTE</h2>
            <div class="two-col">
                <div class="form-box">
                    <h3>S√âLECTION</h3>
                    <div class="form-group">
                        <label>Client</label>
                        <select class="form-control" id="sale-client">
                            <option value="">-- S√©lectionner un client --</option>
                        </select>
                    </div>
                    <div class="search-box">
                        <svg class="search-icon" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <input type="text" class="search-input" id="search-sales" placeholder="üîç Rechercher un produit..." oninput="filterProducts('sales')">
                    </div>
                    <div class="form-group">
                        <label>Produit</label>
                        <select class="form-control" id="sale-product">
                            <option value="">-- S√©lectionner un produit --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Quantit√©</label>
                        <input type="number" class="form-control" id="sale-qty" value="1" min="1">
                    </div>
                    <button class="btn btn-secondary" onclick="addToCart()">+ AJOUTER AU PANIER</button>
                </div>
                <div class="form-box">
                    <h3>PANIER</h3>
                    <div id="cart-items" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
                        <div class="empty-state">Le panier est vide</div>
                    </div>
                    <div id="cart-summary" class="hidden">
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 18px;">
                                <span>TOTAL:</span>
                                <span id="cart-total" style="font-family: 'Bebas Neue'; font-size: 28px; color: #ffe66d;">0 FCFA</span>
                            </div>
                            <div class="form-group">
                                <label>Montant sold√©</label>
                                <input type="number" class="form-control" id="sale-paid" value="0" min="0">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="validateSale()">VALIDER LA VENTE</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Re√ßu -->
        <div id="receipt-page" class="container hidden">
            <div class="receipt">
                <div class="receipt-header">
                    <h1 class="receipt-title">RE√áU DE VENTE</h1>
                    <p id="receipt-date" style="margin: 10px 0; font-size: 14px; color: #666;"></p>
                </div>
                <div class="receipt-info">
                    <h3 style="font-family: 'Bebas Neue'; font-size: 24px; margin-bottom: 10px; color: #1a1a2e;">INFORMATIONS CLIENT</h3>
                    <p style="margin: 5px 0; color: #1a1a2e;"><strong>Nom:</strong> <span id="receipt-client-name"></span></p>
                    <p style="margin: 5px 0; color: #1a1a2e;"><strong>Contact:</strong> <span id="receipt-client-contact"></span></p>
                </div>
                <div style="margin-bottom: 30px;">
                    <h3 style="font-family: 'Bebas Neue'; font-size: 24px; margin-bottom: 15px; color: #1a1a2e;">ARTICLES VENDUS</h3>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="border-bottom: 2px solid #1a1a2e;">
                                <th style="padding: 10px; text-align: left; color: #1a1a2e;">Article</th>
                                <th style="padding: 10px; text-align: center; color: #1a1a2e;">Qt√©</th>
                                <th style="padding: 10px; text-align: right; color: #1a1a2e;">Prix Unit.</th>
                                <th style="padding: 10px; text-align: right; color: #1a1a2e;">Total</th>
                            </tr>
                        </thead>
                        <tbody id="receipt-items-body"></tbody>
                    </table>
                </div>
                <div class="receipt-total">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Total:</span>
                        <span id="receipt-total" style="font-weight: bold;"></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Sold√©:</span>
                        <span id="receipt-paid" style="font-weight: bold; color: #4ecdc4;"></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 2px solid rgba(255,255,255,0.2);">
                        <span style="font-family: 'Bebas Neue'; font-size: 20px;">Dette cumul√©e:</span>
                        <span id="receipt-debt" style="font-family: 'Bebas Neue'; font-size: 24px; color: #ff6b6b;"></span>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #ddd;">
                    <p style="font-size: 14px; color: #666;">Merci pour votre confiance!</p>
                </div>
            </div>
            <div class="two-col">
                <button class="btn btn-back" onclick="showPage('sales'); resetCart();">NOUVELLE VENTE</button>
                <button class="btn btn-secondary" onclick="window.print()">üñ® IMPRIMER</button>
            </div>
            <button class="btn btn-back" style="width: 100%; margin-top: 20px;" onclick="showPage('main-menu')">‚Üê Retour au menu</button>
        </div>

        <!-- Clients -->
        <div id="clients" class="container hidden">
            <button class="btn btn-back" onclick="showPage('main-menu')">‚Üê Retour</button>
            <h2>üë• GESTION DES CLIENTS</h2>
            <button class="btn btn-tertiary" style="margin-bottom: 20px;" onclick="toggleClientForm()">
                <span id="client-form-toggle">+ AJOUTER UN CLIENT</span>
            </button>
            <form id="client-form" class="form-box hidden" onsubmit="addClient(event)">
                <div class="two-col">
                    <div class="form-group">
                        <label>Nom du client</label>
                        <input type="text" class="form-control" id="client-name" required>
                    </div>
                    <div class="form-group">
                        <label>Contact</label>
                        <input type="text" class="form-control" id="client-contact" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-secondary">ENREGISTRER</button>
            </form>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>NOM</th>
                            <th style="text-align: center;">CONTACT</th>
                            <th style="text-align: right;">DETTE</th>
                        </tr>
                    </thead>
                    <tbody id="clients-tbody"></tbody>
                </table>
            </div>
        </div>

        <!-- Comptabilit√© Menu -->
        <div id="accounting" class="container hidden">
            <button class="btn btn-back" onclick="showPage('main-menu')">‚Üê Retour</button>
            <h2>üìä COMPTABILIT√â</h2>
            <div class="menu-grid">
                <button class="menu-card" onclick="showPage('add-expense')">
                    <div style="font-size: 50px;">üí∏</div>
                    <span>AJOUTER D√âPENSES</span>
                </button>
                <button class="menu-card" onclick="showPage('expenses-list')" style="background: linear-gradient(135deg, rgba(78,205,196,0.8), rgba(78,205,196,0.6));">
                    <div style="font-size: 50px;">üìã</div>
                    <span>LISTE DES D√âPENSES</span>
                </button>
                <button class="menu-card" onclick="showPage('revenues')" style="background: linear-gradient(135deg, rgba(255,230,109,0.8), rgba(255,230,109,0.6));">
                    <div style="font-size: 50px;">üí∞</div>
                    <span>RECETTES</span>
                </button>
                <button class="menu-card" onclick="showPage('balance')" style="background: linear-gradient(135deg, rgba(168,218,220,0.8), rgba(168,218,220,0.6));">
                    <div style="font-size: 50px;">üìä</div>
                    <span>BILAN</span>
                </button>
                <button class="menu-card" onclick="showPage('to-order')" style="background: linear-gradient(135deg, rgba(255,182,193,0.8), rgba(255,182,193,0.6));">
                    <div style="font-size: 50px;">üì¶</div>
                    <span>√Ä COMMANDER</span>
                </button>
            </div>
        </div>

        <!-- Ajouter D√©pense -->
        <div id="add-expense" class="container hidden">
            <button class="btn btn-back" onclick="showPage('accounting')">‚Üê Retour</button>
            <h2>üí∏ AJOUTER UNE D√âPENSE</h2>
            <form class="form-box" onsubmit="addExpense(event)">
                <div class="form-group">
                    <label>Titre de la d√©pense</label>
                    <input type="text" class="form-control" id="expense-title" required>
                </div>
                <div class="form-group">
                    <label>Montant (FCFA)</label>
                    <input type="number" class="form-control" id="expense-amount" required min="0">
                </div>
                <button type="submit" class="btn btn-primary">ENREGISTRER</button>
            </form>
        </div>

        <!-- Liste des D√©penses -->
        <div id="expenses-list" class="container hidden">
            <button class="btn btn-back" onclick="showPage('accounting')">‚Üê Retour</button>
            <h2>üìã D√âPENSES MENSUELLES</h2>
            <div class="highlight-box">
                <div style="font-size: 16px; color: rgba(26,26,46,0.7); font-weight: 600; margin-bottom: 10px;">TOTAL DES D√âPENSES DU MOIS</div>
                <div class="highlight-value" id="total-expenses">0 FCFA</div>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>DATE</th>
                            <th>TITRE</th>
                            <th style="text-align: right;">MONTANT</th>
                        </tr>
                    </thead>
                    <tbody id="expenses-tbody"></tbody>
                </table>
            </div>
        </div>

        <!-- Recettes -->
        <div id="revenues" class="container hidden">
            <button class="btn btn-back" onclick="showPage('accounting')">‚Üê Retour</button>
            <h2>üí∞ RECETTES MENSUELLES</h2>
            <div class="highlight-box" style="background: linear-gradient(135deg, rgba(78,205,196,0.2), rgba(78,205,196,0.1)); box-shadow: 0 10px 30px rgba(78,205,196,0.3);">
                <div style="font-size: 16px; color: rgba(26,26,46,0.7); font-weight: 600; margin-bottom: 10px;">TOTAL DES VENTES DU MOIS</div>
                <div class="highlight-value" style="color: #4ecdc4;" id="total-revenues">0 FCFA</div>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>DATE</th>
                            <th>CLIENT</th>
                            <th style="text-align: center;">ARTICLES</th>
                            <th style="text-align: right;">MONTANT</th>
                        </tr>
                    </thead>
                    <tbody id="revenues-tbody"></tbody>
                </table>
            </div>
        </div>

        <!-- Bilan -->
        <div id="balance" class="container hidden">
            <button class="btn btn-back" onclick="showPage('accounting')">‚Üê Retour</button>
            <h2>üìä BILAN MENSUEL</h2>
            <div class="two-col">
                <div class="stat-card" style="border-color: rgba(78,205,196,0.5);">
                    <div class="stat-label">Recettes (Ventes)</div>
                    <div class="stat-value" id="balance-revenues">0 FCFA</div>
                </div>
                <div class="stat-card" style="border-color: rgba(255,107,107,0.5);">
                    <div class="stat-label">D√©penses</div>
                    <div class="stat-value" style="color: #ff6b6b;" id="balance-expenses">0 FCFA</div>
                </div>
            </div>
            <div class="highlight-box" style="background: linear-gradient(135deg, rgba(168,218,220,0.2), rgba(168,218,220,0.1)); box-shadow: 0 10px 30px rgba(168,218,220,0.3);">
                <div style="font-size: 16px; color: rgba(26,26,46,0.7); font-weight: 600; margin-bottom: 10px;">B√âN√âFICE NET</div>
                <div class="highlight-value" style="color: #a8dadc;" id="balance-profit">0 FCFA</div>
            </div>
        </div>

        <!-- √Ä Commander -->
        <div id="to-order" class="container hidden">
            <button class="btn btn-back" onclick="showPage('accounting')">‚Üê Retour</button>
            <h2>üì¶ ARTICLES √Ä COMMANDER</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ARTICLE</th>
                            <th style="text-align: center;">QT√â VENDUE</th>
                            <th style="text-align: center;">√Ä COMMANDER</th>
                            <th style="text-align: right;">CO√õT TOTAL</th>
                            <th style="text-align: center;">ACTION</th>
                        </tr>
                    </thead>
                    <tbody id="toorder-tbody"></tbody>
                </table>
            </div>
        </div>

        <!-- Statistiques -->
        <div id="stats" class="container hidden">
            <button class="btn btn-back" onclick="showPage('main-menu')">‚Üê Retour</button>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; flex-wrap: wrap; gap: 20px;">
                <h2 style="margin: 0;">üìà STATISTIQUES</h2>
                <button class="btn btn-secondary" style="width: auto;" onclick="exportCSV()">üì• EXPORTER CSV</button>
            </div>
            <div class="two-col">
                <div class="form-box">
                    <h3 style="color: #ffe66d;">STATS MENSUELLES</h3>
                    <div id="month-stats"></div>
                </div>
                <div class="form-box">
                    <h3 style="color: #ff6b6b;">STATS ANNUELLES</h3>
                    <div id="year-stats"></div>
                </div>
            </div>
            <div class="form-box" style="margin-top: 30px;">
                <h3>DERNI√àRES VENTES</h3>
                <div class="table-container" style="background: transparent; box-shadow: none;">
                    <table>
                        <thead>
                            <tr>
                                <th>DATE</th>
                                <th>CLIENT</th>
                                <th style="text-align: center;">ARTICLES</th>
                                <th style="text-align: right;">TOTAL</th>
                                <th style="text-align: right;">SOLD√â</th>
                                <th style="text-align: right;">RESTE</th>
                            </tr>
                        </thead>
                        <tbody id="stats-tbody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let products = [], clients = [], sales = [], expenses = [], toOrder = [], cart = [];

        window.addEventListener('DOMContentLoaded', () => {
            loadData();
            showPage('main-menu');
        });

        function loadData() {
            products = JSON.parse(localStorage.getItem('products') || '[]');
            clients = JSON.parse(localStorage.getItem('clients') || '[]');
            sales = JSON.parse(localStorage.getItem('sales') || '[]');
            expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
            toOrder = JSON.parse(localStorage.getItem('toOrder') || '[]');
        }

        function saveData() {
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('clients', JSON.stringify(clients));
            localStorage.setItem('sales', JSON.stringify(sales));
            localStorage.setItem('expenses', JSON.stringify(expenses));
            localStorage.setItem('toOrder', JSON.stringify(toOrder));
        }

        function showPage(id) {
            document.querySelectorAll('.container').forEach(el => el.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            
            if (id === 'view-stock') refreshStock();
            if (id === 'update-stock' || id === 'sales') refreshSelects();
            if (id === 'clients') refreshClients();
            if (id === 'expenses-list') refreshExpensesList();
            if (id === 'revenues') refreshRevenues();
            if (id === 'balance') refreshBalance();
            if (id === 'to-order') refreshToOrder();
            if (id === 'stats') refreshStats();
            
            window.scrollTo(0, 0);
        }

        function showAlert(msg) {
            const overlay = document.createElement('div');
            overlay.className = 'alert-overlay';
            const box = document.createElement('div');
            box.className = 'alert-box';
            box.innerHTML = `<p style="margin-bottom:20px;font-size:16px;">${msg}</p><button class="btn btn-secondary" onclick="closeAlert()">OK</button>`;
            document.body.append(overlay, box);
            window.closeAlert = () => { document.body.removeChild(overlay); document.body.removeChild(box); };
        }

        // Recherche
        function filterProducts(type) {
            const search = document.getElementById(`search-${type}`).value.toLowerCase();
            const select = document.getElementById(type === 'update' ? 'update-select' : 'sale-product');
            Array.from(select.options).forEach(opt => {
                opt.style.display = (opt.value && !opt.text.toLowerCase().includes(search)) ? 'none' : 'block';
            });
        }

        // Produits
        function addProduct(e) {
            e.preventDefault();
            products.push({
                id: Date.now(),
                nom: document.getElementById('product-name').value,
                prixAchat: +document.getElementById('product-buy-price').value,
                prixVente: +document.getElementById('product-sell-price').value,
                quantite: +document.getElementById('product-quantity').value
            });
            saveData();
            showAlert('‚úÖ Article ajout√© avec succ√®s !');
            e.target.reset();
        }

        function refreshSelects() {
            const updateSel = document.getElementById('update-select');
            const saleProdSel = document.getElementById('sale-product');
            const saleClientSel = document.getElementById('sale-client');
            
            updateSel.innerHTML = '<option value="">-- Choisir un produit --</option>';
            saleProdSel.innerHTML = '<option value="">-- S√©lectionner un produit --</option>';
            saleClientSel.innerHTML = '<option value="">-- S√©lectionner un client --</option>';
            
            products.forEach(p => {
                updateSel.innerHTML += `<option value="${p.id}">${p.nom} (Stock: ${p.quantite})</option>`;
                if (p.quantite > 0) saleProdSel.innerHTML += `<option value="${p.id}">${p.nom} - ${p.prixVente.toLocaleString()} FCFA (Stock: ${p.quantite})</option>`;
            });
            clients.forEach(c => saleClientSel.innerHTML += `<option value="${c.id}">${c.nom} (${c.contact})</option>`);
        }

        function loadForUpdate() {
            const id = +document.getElementById('update-select').value;
            if (!id) return document.getElementById('update-fields').classList.add('hidden');
            const p = products.find(x => x.id === id);
            document.getElementById('update-buy-price').value = p.prixAchat;
            document.getElementById('update-sell-price').value = p.prixVente;
            document.getElementById('update-qty').value = 0;
            document.getElementById('update-fields').classList.remove('hidden');
        }

        function updateStock(e) {
            e.preventDefault();
            const id = +document.getElementById('update-select').value;
            const p = products.find(x => x.id === id);
            const addQty = +document.getElementById('update-qty').value;
            p.prixAchat = +document.getElementById('update-buy-price').value;
            p.prixVente = +document.getElementById('update-sell-price').value;
            p.quantite += addQty;
            
            // Mise √† jour des commandes
            if (addQty > 0) {
                const orderIdx = toOrder.findIndex(o => o.productId === id);
                if (orderIdx !== -1) {
                    toOrder[orderIdx].qtyToOrder -= addQty;
                    if (toOrder[orderIdx].qtyToOrder <= 0) toOrder.splice(orderIdx, 1);
                }
            }
            
            saveData();
            showAlert('‚úÖ Stock mis √† jour avec succ√®s !');
            showPage('stock-menu');
        }

        function refreshStock() {
            const tbody = document.getElementById('stock-tbody');
            if (!products.length) {
                tbody.innerHTML = '<tr><td colspan="5" class="empty-state">Aucun produit en stock</td></tr>';
                document.getElementById('total-value').textContent = '0 FCFA';
                return;
            }
            let total = 0;
            tbody.innerHTML = '';
            products.forEach((p, i) => {
                const val = p.prixAchat * p.quantite;
                total += val;
                const tr = document.createElement('tr');
                tr.style.background = i % 2 === 0 ? 'rgba(255,255,255,0.02)' : 'transparent';
                tr.innerHTML = `
                    <td style="font-weight:600;">${p.nom}</td>
                    <td style="text-align:center;">${p.prixAchat.toLocaleString()} FCFA</td>
                    <td style="text-align:center;color:#4ecdc4;">${p.prixVente.toLocaleString()} FCFA</td>
                    <td style="text-align:center;color:${p.quantite < 10 ? '#ff6b6b' : '#ffe66d'};">${p.quantite}</td>
                    <td style="text-align:right;font-weight:600;">${val.toLocaleString()} FCFA</td>
                `;
                tbody.appendChild(tr);
            });
            document.getElementById('total-value').textContent = total.toLocaleString() + ' FCFA';
        }

        // Ventes
        function addToCart() {
            const prodId = +document.getElementById('sale-product').value;
            const qty = +document.getElementById('sale-qty').value;
            if (!prodId) return showAlert('‚ö†Ô∏è Veuillez s√©lectionner un produit');
            const p = products.find(x => x.id === prodId);
            if (p.quantite < qty) return showAlert('‚ö†Ô∏è Stock insuffisant !');
            
            const existing = cart.find(x => x.id === prodId);
            if (existing) existing.qty += qty;
            else cart.push({ id: prodId, nom: p.nom, prix: p.prixVente, prixAchat: p.prixAchat, qty });
            
            document.getElementById('sale-qty').value = 1;
            refreshCart();
        }

        function refreshCart() {
            const div = document.getElementById('cart-items');
            const summary = document.getElementById('cart-summary');
            
            if (!cart.length) {
                div.innerHTML = '<div class="empty-state">Le panier est vide</div>';
                summary.classList.add('hidden');
                return;
            }
            
            div.innerHTML = cart.map((item, i) => `
                <div class="cart-item">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                        <span style="font-weight:600;">${item.nom}</span>
                        <button class="btn-delete" onclick="removeCart(${i})">‚úï</button>
                    </div>
                    <div style="display:flex;justify-content:space-between;font-size:14px;">
                        <span>${item.qty} √ó ${item.prix.toLocaleString()} FCFA</span>
                        <span style="font-weight:700;color:#4ecdc4;">${(item.qty * item.prix).toLocaleString()} FCFA</span>
                    </div>
                </div>
            `).join('');
            
            const total = cart.reduce((s, x) => s + x.qty * x.prix, 0);
            document.getElementById('cart-total').textContent = total.toLocaleString() + ' FCFA';
            summary.classList.remove('hidden');
        }

        function removeCart(i) {
            cart.splice(i, 1);
            refreshCart();
        }

        function resetCart() {
            cart = [];
            document.getElementById('sale-paid').value = 0;
            refreshCart();
        }

        function validateSale() {
            const clientId = +document.getElementById('sale-client').value;
            if (!clientId) return showAlert('‚ö†Ô∏è Veuillez s√©lectionner un client');
            if (!cart.length) return showAlert('‚ö†Ô∏è Le panier est vide');
            
            const client = clients.find(c => c.id === clientId);
            const total = cart.reduce((s, x) => s + x.qty * x.prix, 0);
            const paid = +document.getElementById('sale-paid').value;
            
            const sale = {
                id: Date.now(),
                clientId,
                clientNom: client.nom,
                clientContact: client.contact,
                items: [...cart],
                total,
                paid,
                date: new Date().toISOString()
            };
            
            sales.push(sale);
            
            // Mise √† jour stock et commandes
            cart.forEach(item => {
                const p = products.find(x => x.id === item.id);
                p.quantite -= item.qty;
                
                // Ajouter aux articles √† commander
                const existing = toOrder.find(o => o.productId === item.id);
                if (existing) {
                    existing.qtySold += item.qty;
                    existing.qtyToOrder += item.qty;
                } else {
                    toOrder.push({
                        productId: item.id,
                        productName: item.nom,
                        qtySold: item.qty,
                        qtyToOrder: item.qty,
                        buyPrice: item.prixAchat
                    });
                }
            });
            
            if (!client.dette) client.dette = 0;
            client.dette += total - paid;
            
            saveData();
            showReceipt(sale);
            cart = [];
        }

        function showReceipt(sale) {
            document.getElementById('receipt-date').textContent = new Date(sale.date).toLocaleString('fr-FR');
            document.getElementById('receipt-client-name').textContent = sale.clientNom;
            document.getElementById('receipt-client-contact').textContent = sale.clientContact;
            
            const tbody = document.getElementById('receipt-items-body');
            tbody.innerHTML = sale.items.map(item => `
                <tr style="border-bottom: 1px solid #ddd;">
                    <td style="padding:10px;color:#1a1a2e;">${item.nom}</td>
                    <td style="padding:10px;text-align:center;color:#1a1a2e;">${item.qty}</td>
                    <td style="padding:10px;text-align:right;color:#1a1a2e;">${item.prix.toLocaleString()} FCFA</td>
                    <td style="padding:10px;text-align:right;color:#1a1a2e;">${(item.qty * item.prix).toLocaleString()} FCFA</td>
                </tr>
            `).join('');
            
            const client = clients.find(c => c.id === sale.clientId);
            document.getElementById('receipt-total').textContent = sale.total.toLocaleString() + ' FCFA';
            document.getElementById('receipt-paid').textContent = sale.paid.toLocaleString() + ' FCFA';
            document.getElementById('receipt-debt').textContent = (client.dette || 0).toLocaleString() + ' FCFA';
            
            showPage('receipt-page');
        }

        // Clients
        function toggleClientForm() {
            const form = document.getElementById('client-form');
            const btn = document.getElementById('client-form-toggle');
            if (form.classList.contains('hidden')) {
                form.classList.remove('hidden');
                btn.textContent = 'ANNULER';
            } else {
                form.classList.add('hidden');
                btn.textContent = '+ AJOUTER UN CLIENT';
            }
        }

        function addClient(e) {
            e.preventDefault();
            clients.push({
                id: Date.now(),
                nom: document.getElementById('client-name').value,
                contact: document.getElementById('client-contact').value,
                dette: 0
            });
            saveData();
            showAlert('‚úÖ Client ajout√© avec succ√®s !');
            e.target.reset();
            toggleClientForm();
            refreshClients();
        }

        function refreshClients() {
            const tbody = document.getElementById('clients-tbody');
            if (!clients.length) {
                tbody.innerHTML = '<tr><td colspan="3" class="empty-state">Aucun client enregistr√©</td></tr>';
                return;
            }
            tbody.innerHTML = clients.map((c, i) => `
                <tr style="background:${i % 2 === 0 ? 'rgba(255,255,255,0.02)' : 'transparent'};">
                    <td style="font-weight:600;">${c.nom}</td>
                    <td style="text-align:center;">${c.contact}</td>
                    <td style="text-align:right;color:${(c.dette || 0) > 0 ? '#ff6b6b' : '#4ecdc4'};font-weight:600;">${(c.dette || 0).toLocaleString()} FCFA</td>
                </tr>
            `).join('');
        }

        // D√©penses
        function addExpense(e) {
            e.preventDefault();
            expenses.push({
                id: Date.now(),
                titre: document.getElementById('expense-title').value,
                montant: +document.getElementById('expense-amount').value,
                date: new Date().toISOString()
            });
            saveData();
            showAlert('‚úÖ D√©pense enregistr√©e !');
            e.target.reset();
        }

        function refreshExpensesList() {
            const now = new Date();
            const monthExpenses = expenses.filter(e => {
                const d = new Date(e.date);
                return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
            });
            
            const total = monthExpenses.reduce((s, e) => s + e.montant, 0);
            document.getElementById('total-expenses').textContent = total.toLocaleString() + ' FCFA';
            
            const tbody = document.getElementById('expenses-tbody');
            if (!monthExpenses.length) {
                tbody.innerHTML = '<tr><td colspan="3" class="empty-state">Aucune d√©pense ce mois</td></tr>';
                return;
            }
            
            tbody.innerHTML = monthExpenses.reverse().map((e, i) => `
                <tr style="background:${i % 2 === 0 ? 'rgba(255,255,255,0.02)' : 'transparent'};">
                    <td>${new Date(e.date).toLocaleDateString('fr-FR')}</td>
                    <td style="font-weight:600;">${e.titre}</td>
                    <td style="text-align:right;color:#ff6b6b;font-weight:600;">${e.montant.toLocaleString()} FCFA</td>
                </tr>
            `).join('');
        }

        function refreshRevenues() {
            const now = new Date();
            const monthSales = sales.filter(s => {
                const d = new Date(s.date);
                return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
            });
            
            const total = monthSales.reduce((s, e) => s + e.total, 0);
            document.getElementById('total-revenues').textContent = total.toLocaleString() + ' FCFA';
            
            const tbody = document.getElementById('revenues-tbody');
            if (!monthSales.length) {
                tbody.innerHTML = '<tr><td colspan="4" class="empty-state">Aucune vente ce mois</td></tr>';
                return;
            }
            
            tbody.innerHTML = monthSales.reverse().map((s, i) => `
                <tr style="background:${i % 2 === 0 ? 'rgba(255,255,255,0.02)' : 'transparent'};">
                    <td>${new Date(s.date).toLocaleDateString('fr-FR')}</td>
                    <td style="font-weight:600;">${s.clientNom}</td>
                    <td style="text-align:center;">${s.items.length}</td>
                    <td style="text-align:right;color:#4ecdc4;font-weight:600;">${s.total.toLocaleString()} FCFA</td>
                </tr>
            `).join('');
        }

        function refreshBalance() {
            const now = new Date();
            const monthSales = sales.filter(s => {
                const d = new Date(s.date);
                return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
            });
            const monthExpenses = expenses.filter(e => {
                const d = new Date(e.date);
                return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
            });
            
            const revenues = monthSales.reduce((s, e) => s + e.total, 0);
            const totalExp = monthExpenses.reduce((s, e) => s + e.montant, 0);
            const profit = revenues - totalExp;
            
            document.getElementById('balance-revenues').textContent = revenues.toLocaleString() + ' FCFA';
            document.getElementById('balance-expenses').textContent = totalExp.toLocaleString() + ' FCFA';
            document.getElementById('balance-profit').textContent = profit.toLocaleString() + ' FCFA';
        }

        function refreshToOrder() {
            const tbody = document.getElementById('toorder-tbody');
            if (!toOrder.length) {
                tbody.innerHTML = '<tr><td colspan="5" class="empty-state">Aucun article √† commander</td></tr>';
                return;
            }
            
            tbody.innerHTML = toOrder.map((o, i) => {
                const cost = o.qtyToOrder * o.buyPrice;
                return `
                    <tr style="background:${i % 2 === 0 ? 'rgba(255,255,255,0.02)' : 'transparent'};">
                        <td style="font-weight:600;">${o.productName}</td>
                        <td style="text-align:center;color:#ffe66d;">${o.qtySold}</td>
                        <td style="text-align:center;color:#ff6b6b;font-weight:600;">${o.qtyToOrder}</td>
                        <td style="text-align:right;font-weight:600;">${cost.toLocaleString()} FCFA</td>
                        <td style="text-align:center;">
                            <button class="btn btn-secondary" style="padding:8px 15px;font-size:14px;" onclick="markOrdered(${o.productId})">‚úì OK</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function markOrdered(productId) {
            const idx = toOrder.findIndex(o => o.productId === productId);
            if (idx !== -1) {
                toOrder.splice(idx, 1);
                saveData();
                refreshToOrder();
                showAlert('‚úÖ Article marqu√© comme command√© !');
            }
        }

        function refreshStats() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            
            const yearSales = sales.filter(s => new Date(s.date).getFullYear() === year);
            const monthSales = sales.filter(s => {
                const d = new Date(s.date);
                return d.getFullYear() === year && d.getMonth() === month;
            });
            
            const calcStats = arr => ({
                revenue: arr.reduce((s, x) => s + x.total, 0),
                paid: arr.reduce((s, x) => s + x.paid, 0),
                debt: arr.reduce((s, x) => s + (x.total - x.paid), 0)
            });
            
            const ys = calcStats(yearSales);
            const ms = calcStats(monthSales);
            const monthName = new Date(year, month).toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' }).toUpperCase();
            
            document.getElementById('month-stats').innerHTML = `
                <p style="margin-bottom:20px;font-size:14px;opacity:0.8;">${monthName}</p>
                <div class="stat-card"><div class="stat-label">Ventes totales</div><div class="stat-value">${ms.revenue.toLocaleString()} FCFA</div></div>
                <div class="stat-card"><div class="stat-label">Montant encaiss√©</div><div class="stat-value">${ms.paid.toLocaleString()} FCFA</div></div>
                <div class="stat-card" style="border-color:rgba(255,107,107,0.3);"><div class="stat-label">Cr√©ances</div><div class="stat-value" style="color:#ff6b6b;">${ms.debt.toLocaleString()} FCFA</div></div>
                <div class="stat-card" style="border-color:rgba(255,230,109,0.3);"><div class="stat-label">Nombre de ventes</div><div class="stat-value" style="color:#ffe66d;">${monthSales.length}</div></div>
            `;
            
            document.getElementById('year-stats').innerHTML = `
                <p style="margin-bottom:20px;font-size:14px;opacity:0.8;">${year}</p>
                <div class="stat-card"><div class="stat-label">Ventes totales</div><div class="stat-value">${ys.revenue.toLocaleString()} FCFA</div></div>
                <div class="stat-card"><div class="stat-label">Montant encaiss√©</div><div class="stat-value">${ys.paid.toLocaleString()} FCFA</div></div>
                <div class="stat-card" style="border-color:rgba(255,107,107,0.3);"><div class="stat-label">Cr√©ances</div><div class="stat-value" style="color:#ff6b6b;">${ys.debt.toLocaleString()} FCFA</div></div>
                <div class="stat-card" style="border-color:rgba(255,230,109,0.3);"><div class="stat-label">Nombre de ventes</div><div class="stat-value" style="color:#ffe66d;">${yearSales.length}</div></div>
            `;
            
            const tbody = document.getElementById('stats-tbody');
            if (!sales.length) {
                tbody.innerHTML = '<tr><td colspan="6" class="empty-state">Aucune vente enregistr√©e</td></tr>';
                return;
            }
            
            tbody.innerHTML = [...sales].reverse().slice(0, 10).map((s, i) => `
                <tr style="background:${i % 2 === 0 ? 'rgba(255,255,255,0.02)' : 'transparent'};">
                    <td style="font-size:14px;">${new Date(s.date).toLocaleDateString('fr-FR')}</td>
                    <td style="font-weight:600;">${s.clientNom}</td>
                    <td style="text-align:center;">${s.items.length}</td>
                    <td style="text-align:right;font-weight:600;">${s.total.toLocaleString()} FCFA</td>
                    <td style="text-align:right;color:#4ecdc4;">${s.paid.toLocaleString()} FCFA</td>
                    <td style="text-align:right;color:#ff6b6b;">${(s.total - s.paid).toLocaleString()} FCFA</td>
                </tr>
            `).join('');
        }

        function exportCSV() {
            if (!sales.length) return showAlert('‚ö†Ô∏è Aucune vente √† exporter');
            
            const csv = [
                ['Date', 'Client', 'Contact', 'Total', 'Sold√©', 'Dette'].join(','),
                ...sales.map(s => [
                    new Date(s.date).toLocaleString('fr-FR'),
                    s.clientNom,
                    s.clientContact,
                    s.total,
                    s.paid,
                    s.total - s.paid
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ventes_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }
    </script>
</body>
</html>
